{"version":3,"sources":["packages/wallet/scenes/wallet/components/wallets/nep2-wallet/scenes/import-nep2/components/form.tsx","packages/wallet/scenes/wallet/components/wallets/nep2-wallet/scenes/import-nep2/index.tsx"],"names":["__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","formik__WEBPACK_IMPORTED_MODULE_1__","_components_password_input__WEBPACK_IMPORTED_MODULE_2__","_components_display_error__WEBPACK_IMPORTED_MODULE_3__","ImportNep2","props","touched","errors","isSubmitting","values","setFieldValue","submitForm","status","setStatus","encryptedKey","password","isValidSubmit","a","createElement","className","placeholder","value","onChange","e","target","isLoading","onKeyDown","val","error","message","onClose","undefined","type","disabled","concat","_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_0__","_cityofzion_neon_js__WEBPACK_IMPORTED_MODULE_0___default","_components_form__WEBPACK_IMPORTED_MODULE_2__","withFormik","mapPropsToValues","wallet","validate","Neon","is","handleSubmit","_ref","setSubmitting","account","create","decrypt","then","onConnected","provider","address","privateKey","encrypted","catch","Form"],"mappings":"6FAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,GAAAI,EAAAJ,EAAAK,EAAAF,GAAAG,EAAAN,EAAA,IAAAO,EAAAP,EAAA,IAAAQ,EAAAR,EAAA,IA8DeS,UAxDI,SAACC,GAAmC,IAEnDC,EAQED,EARFC,QACAC,EAOEF,EAPFE,OACAC,EAMEH,EANFG,aACAC,EAKEJ,EALFI,OACAC,EAIEL,EAJFK,cACAC,EAGEN,EAHFM,WACAC,EAEEP,EAFFO,OACAC,EACER,EADFQ,UAEMC,EAA2BL,EAA3BK,aAAcC,EAAaN,EAAbM,SAChBC,EAAgBF,GAAgBC,EACtC,OACEhB,EAAAkB,EAAAC,cAACjB,EAAA,EAAD,KACEF,EAAAkB,EAAAC,cAAA,OAAKC,UAAU,SACbpB,EAAAkB,EAAAC,cAAA,OAAKC,UAAU,SAAf,iBACApB,EAAAkB,EAAAC,cAAA,SACEC,UAAU,QACVC,YAAY,gBACZC,MAAOP,EACPQ,SAAU,SAAAC,GAAC,OAAIb,EAAc,eAAgBa,EAAEC,OAAOH,UAEvDd,EAAOO,cAAgBR,EAAQQ,cAC9Bf,EAAAkB,EAAAC,cAAA,OAAKC,UAAU,kBAAkBZ,EAAOO,eAI5Cf,EAAAkB,EAAAC,cAAA,OAAKC,UAAU,SACbpB,EAAAkB,EAAAC,cAAA,OAAKC,UAAU,SAAf,YACApB,EAAAkB,EAAAC,cAAChB,EAAA,QAAD,CACEuB,UAAWjB,EACXkB,UAAW,mBAAOV,GAAgBL,KAClCW,SAAU,SAAAK,GAAG,OAAIjB,EAAc,WAAYiB,IAC3CN,MAAON,IAERR,EAAOQ,UAAYT,EAAQS,UAC1BhB,EAAAkB,EAAAC,cAAA,OAAKC,UAAU,kBAAkBZ,EAAOQ,cAG3CH,IAAUA,EAAOgB,QAChB7B,EAAAkB,EAAAC,cAACf,EAAA,QAAD,CAAc0B,QAASjB,EAAOgB,MAAOE,QAAS,kBAAMjB,OAAUkB,MAIhEhC,EAAAkB,EAAAC,cAAA,UACEc,KAAK,SACLC,UAAWjB,EACXG,UAAS,qBAAAe,OAAuB1B,EAAe,aAAe,KAHhE,kDCnDNb,EAAAC,EAAAC,GAAA,IAAAsC,EAAAxC,EAAA,GAAAyC,EAAAzC,EAAAK,EAAAmC,GAAAlC,EAAAN,EAAA,IAAA0C,EAAA1C,EAAA,KAeMS,EAAakC,YAAwC,CAEzDC,iBAAkB,SAAAlC,GAChB,MAAO,CACLS,aACET,EAAMmC,QAAUnC,EAAMmC,OAAO1B,aACzBT,EAAMmC,OAAO1B,aACb,GACNC,SAAU,KAGd0B,SAAU,SAAChC,GACT,IAAIF,EAA4B,GAUhC,OATKE,EAAOK,eACVP,EAAOO,aAAe,YAEnBL,EAAOM,WACVR,EAAOQ,SAAW,YAEf2B,IAAKC,GAAG7B,aAAaL,EAAOK,gBAC/BP,EAAOO,aAAe,wCAEjBP,GAETqC,aAAc,SAACnC,EAADoC,GAA6D,IAAtCxC,EAAsCwC,EAAtCxC,MAAOyC,EAA+BD,EAA/BC,cAAejC,EAAgBgC,EAAhBhC,UACnDkC,EAAUL,IAAKM,OAAOD,QAAQtC,EAAOK,cAC3CD,OAAUkB,GACVgB,EACGE,QAAQxC,EAAOM,UACfmC,KAAK,SAAAH,GACJD,GAAc,GACdzC,EAAM8C,YAAY,CAChBC,SAAU,QACVC,QAASN,EAAQM,QACjBC,WAAYP,EAAQO,WACpBxC,aAAciC,EAAQQ,cAGzBC,MAAM,SAAAjC,GACLuB,GAAc,GACdjC,EAAU,CACRe,MAAOL,EAAEM,cAzCAS,CA6ChBmB,WAEYrD","file":"static/js/4.1f69b961.chunk.js","sourcesContent":["import React from \"react\";\nimport { Form as FormikForm, FormikProps } from \"formik\";\nimport { Nep2States } from \"../index\";\nimport PasswordInput from \"../../../components/password-input\";\nimport DisplayError from \"../../../components/display-error\";\n\nconst ImportNep2 = (props: FormikProps<Nep2States>) => {\n  const {\n    touched,\n    errors,\n    isSubmitting,\n    values,\n    setFieldValue,\n    submitForm,\n    status,\n    setStatus,\n  } = props;\n  const { encryptedKey, password } = values;\n  const isValidSubmit = encryptedKey && password;\n  return (\n    <FormikForm>\n      <div className=\"field\">\n        <div className=\"label\">Encrypted key</div>\n        <input\n          className=\"input\"\n          placeholder=\"Encrypted key\"\n          value={encryptedKey}\n          onChange={e => setFieldValue(\"encryptedKey\", e.target.value)}\n        />\n        {errors.encryptedKey && touched.encryptedKey && (\n          <div className=\"help is-danger\">{errors.encryptedKey}</div>\n        )}\n      </div>\n\n      <div className=\"field\">\n        <div className=\"label\">Password</div>\n        <PasswordInput\n          isLoading={isSubmitting}\n          onKeyDown={() => (isValidSubmit ? submitForm() : false)}\n          onChange={val => setFieldValue(\"password\", val)}\n          value={password}\n        />\n        {errors.password && touched.password && (\n          <div className=\"help is-danger\">{errors.password}</div>\n        )}\n      </div>\n      {status && status.error ? (\n        <DisplayError message={status.error} onClose={() => setStatus(undefined)} />\n      ) : (\n        false\n      )}\n      <button\n        type=\"submit\"\n        disabled={!isValidSubmit}\n        className={`button is-primary ${isSubmitting ? \"is-loading\" : \"\"}`}\n      >\n        Open wallet\n      </button>\n    </FormikForm>\n  );\n};\n\nexport default ImportNep2;\n","import Neon from \"@cityofzion/neon-js\";\nimport { withFormik, FormikErrors } from \"formik\";\nimport Form from \"./components/form\";\nimport { CurrentWalletProps } from \"../../../../../../../types\";\n\nexport interface Nep2States {\n  encryptedKey: string;\n  password: string;\n}\n\ninterface ImportNep2Props {\n  wallet?: CurrentWalletProps;\n  onConnected: (account: CurrentWalletProps) => void;\n}\n\nconst ImportNep2 = withFormik<ImportNep2Props, Nep2States>({\n  // Transform outer props into form values\n  mapPropsToValues: props => {\n    return {\n      encryptedKey:\n        props.wallet && props.wallet.encryptedKey\n          ? props.wallet.encryptedKey\n          : \"\",\n      password: \"\",\n    };\n  },\n  validate: (values: Nep2States) => {\n    let errors: FormikErrors<any> = {};\n    if (!values.encryptedKey) {\n      errors.encryptedKey = \"Required\";\n    }\n    if (!values.password) {\n      errors.password = \"Required\";\n    }\n    if (!Neon.is.encryptedKey(values.encryptedKey)) {\n      errors.encryptedKey = \"It is not valid encrypted key format\";\n    }\n    return errors;\n  },\n  handleSubmit: (values: Nep2States, { props, setSubmitting, setStatus }) => {\n    const account = Neon.create.account(values.encryptedKey);\n    setStatus(undefined);\n    account\n      .decrypt(values.password)\n      .then(account => {\n        setSubmitting(false);\n        props.onConnected({\n          provider: \"LOCAL\",\n          address: account.address,\n          privateKey: account.privateKey,\n          encryptedKey: account.encrypted,\n        });\n      })\n      .catch(e => {\n        setSubmitting(false);\n        setStatus({\n          error: e.message,\n        });\n      });\n  },\n})(Form);\n\nexport default ImportNep2;\n"],"sourceRoot":""}